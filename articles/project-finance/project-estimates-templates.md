---
title: Синхронизовање процена пројекта директно из услуге Project Service Automation са услугом Finance and Operations
description: Ова тема описује предлошке и основне задатке који се користе за синхронизацију процене радних сати и процене трошкова пројекта директно из услуге Microsoft Dynamics 365 Project Service Automation у Dynamics 365 Finance.
author: KimANelson
manager: AnnBe
ms.date: 07/20/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: d688ce9a-41e3-4ebe-952e-700f8351fbe9
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2016-11-28
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: a24a967d82c2e005e61234d34da8a583b61ff7b1
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: sr-Cyrl-RS
ms.lasthandoff: 03/24/2020
ms.locfileid: "3755364"
---
# <a name="synchronize-project-estimates-directly-from-project-service-automation-to-finance-and-operations"></a>Синхронизовање процена пројекта директно из услуге Project Service Automation са услугом Finance and Operations

[!include[banner](../includes/banner.md)]

Ова тема описује предлошке и основне задатке који се користе за синхронизацију процене радних сати и процене трошкова пројекта директно из услуге Dynamics 365 Project Service Automation у Dynamics 365 Finance.

> [!NOTE]
> - Интеграција пројектних задатака, категорије трансакција трошкова, процене радних сати, процене трошкова и закључавање функционалности доступни су у верзији 8.0.
> - Интеграција стварних података доступна је у верзији 8.0.1 или новијој.

## <a name="data-flow-for-project-service-automation-to-finance"></a>Ток података из услуге Project Service Automation у Finance

Решење за интеграцију из услуге Project Service Automation у Finance користи функцију интеграције података за синхронизацију података у свим инстанцама услуга Project Service Automation и Finance. Предлошци за интеграцију који су доступни са функцијом Интеграција података омогућава ток података о проценама радних сати пројекта и проценама трошкова пројекта између из услуге Project Service Automation у Finance.

Следећа илустрација приказује како се подаци синхронизују између услуга Project Service Automation и Finance.

[![Ток података за интеграцију услуге Project Service Automation са услугом Finance](./media/ProjectEstimatesFlow.png)](./media/ProjectEstimatesFlow.png)

## <a name="project-hour-estimates"></a>Процене радних сати за пројекат

### <a name="template-and-tasks"></a>Предлошци и задаци

Да бисте приступили доступним предлошцима, у Microsoft Power Apps центру администрације изаберите **Пројекти**, а затим у горњем десном углу изаберите **Нови пројекат** за избор јавних предложака.

Следећи предложак и основни задаци који се користе за синхронизацију процена радних сати пројекта из услуге Project Service Automation у Finance:

- **Назив предлошка у Интеграцији података:** Процене радних сати пројекта (из PSA у Fin and Ops)
- **Назив задатака у пројекту:**

    - Односи између трансакција
    - Процене трошкова

### <a name="entity-set"></a>Скуп ентитета

| Project Service Automation | Finance                                       |
|----------------------------|-----------------------------------------------|
| Пројектни задаци              | Ентитет интеграције за процене радних сати пројекта |

### <a name="entity-flow"></a>Ток ентитета

Проценама радних сати пројекта се управља у услузи Project Service Automation и они се синхронизују са услугом Finance као предвиђања сати пројекта.

### <a name="prerequisites"></a>Предуслови

Да би могла да се изврши синхронизација процена радних сати пројекта, морате синхронизовати пројекте, пројектне задатке и категорије трансакција трошкова пројекта.

### <a name="power-query"></a>Power Query

У предлошку за процену радног времена пројекта морате да користите Microsoft Power Query за Excel да бисте извршили ове задатке:

- Поставите ID подразумеваног модела предвиђања који ће се користити када интеграција креира нова предвиђања сати.
- У задатку филтрирајте све записе специфичне за ресурсе који неће успети у интеграцији предвиђања радних сати.
- Филтрирајте све празне редове категорија трансакција. Неиспуњавање овог задатка може резултирати нетачним предвиђањима радних сати.

#### <a name="set-the-default-forecast-model-id"></a>Подесите подразумевани ID модела предвиђања

Да бисте ажурирали подразумевани ID модела предвиђања у предлошку, кликните на стрелицу **Мапа** за отварање мапирања. Затим изаберите везу **Напредни упит и филтрирање**.

- Ако користите подразумевани предложак процене радних сати пројекта (из PSA у Fin and Ops), изаберите **Услов уметања** у лист **Примењени кораци**. У ставци **Функција**, замените **O\_forecast** називом ID-а модела предвиђања који треба користити уз интеграцију. Подразумевани предложак садржи ID модела предвиђања из демо података.
- Ако креирате нови образац, морате додати ову колону. У услузи Power Query изаберите **Додај условну колону** и унесите назив за нову колону, као што је **ModelID**. Унесите услов за колону, где, ако пројектни задатак није празан, онда \<унесите ID модела предвиђања\>; иначе је празно.

#### <a name="filter-out-resource-specific-records"></a>Филтрирање записа специфичних за ресурсе

Предложак процена радних сати пројекта (из PSA у Fin and Ops) има подразумевани филтер који уклања све записе специфичне за ресурсе. Ако креирате сопствени образац, морате додати овај филтер. Изаберите везу **Напредни упит и филтрирање** да филтрирате по колони **msdyn\_islinetask** тако да буду увршћени само **Нетачни** записи.

#### <a name="filter-out-empty-transaction-category-rows"></a>Филтрирајте празне редове категорија трансакција

Морате додати филтер да бисте уклонили све редове који имају празне категорије трансакција. Овај задатак је обавезан, без обзира на то да ли користите подразумевани предложак или креирате сопствени предложак. Овај филтер уклања све редове резимеа из услуге Project Service Automation који могу проузроковати нетачна предвиђања радних сати у услузи Finance. Изаберите везу **Напредни упит и филтрирање** да филтрирате празне записе у колони **msdyn\_transactioncategory\_value**.

### <a name="template-mapping-in-data-integration"></a>Мапирање предложака у услузи Data Integration

Следећа илустрација приказује пример мапирања задатака предлошка у услузи Data Integration. Мапирање приказује информације о терену које ће се синхронизовати из услуге Project Service Automation у Finance.

[![Мапирање предложака](./media/ProjectHourEstimatesMapping.jpg)](./media/ProjectHourEstimatesMapping.jpg)

## <a name="project-expense-estimates"></a>Процене трошкова пројекта

### <a name="template-and-tasks"></a>Предлошци и задаци

Следећи предложак и основни задаци који се користе за синхронизацију процена трошкова из услуге Project Service Automation у Finance:

- **Назив предлошка у Интеграцији података:** Процене трошкова пројекта (из PSA у Fin and Ops)
- **Назив задатака у пројекту:**

    - Односи између трансакција 
    - Процене трошкова

### <a name="entity-set"></a>Скуп ентитета

| Project Service Automation | Finance                                                  |
|----------------------------|----------------------------------------------------------|
| Везе трансакција    | Ентитет интеграције за односе трансакција пројекта |
| Ставке процене             | Ентитет интеграције за процене трошкова пројекта         |

### <a name="entity-flow"></a>Ток ентитета

Проценама трошкова се управља у услузи Project Service Automation и оне се синхронизују са услугом Finance као предвиђања трошкова пројекта.

### <a name="prerequisites"></a>Предуслови

Да би могла да се изврши синхронизација процена трошкова пројекта, морате синхронизовати пројекте, пројектне задатке и категорије трансакција трошкова пројекта.

### <a name="power-query"></a>Power Query

У предлошку за процену трошкова пројекта морате да користите Power Query да бисте извршили следеће задатке:

- Филтрирајте да бисте укључили само записе линија процене трошкова.
- Поставите ID подразумеваног модела предвиђања који ће се користити када интеграција креира нова предвиђања сати.
- Трансформишите врсте наплате.
- Трансформишите врсте трансакција.

#### <a name="filter-to-include-only-expense-estimate-lines"></a>Филтрирајте да бисте укључили само линије процене трошкова

Предложак за процену трошкова пројекта (из PSA у Fin and Ops) има подразумевани филтер који укључује само линије трошкова у интеграцији. Ако креирате сопствени образац, морате додати овај филтер. Изаберите задатак **Односи између трансакција**, а затим кликните на стрелицу **Мапа** да бисте отворили мапирање. Изаберите везу **Напредни упит и филтрирање**. Филтрирајте колону **msdyn\_transactiontype1**колона тако да укључује само **msdyn\_estimateline**.

#### <a name="set-the-default-forecast-model-id"></a>Подесите подразумевани ID модела предвиђања

Да бисте ажурирали подразумевани ID модела предвиђања у предлошку, изаберите задатак **Процене трошкова**, а затим кликните на стрелицу **Мапирај** да бисте отворили мапирање. Изаберите везу **Напредни упит и филтрирање**.

- Ако користите подразумевани предложак процене трошкова пројекта (из PSA у Fin and Ops), у услузи Power Query изаберите **Услов уметања** у одељку **Примењени кораци**. У ставци **Функција**, замените **O\_forecast** називом ID-а модела предвиђања који треба користити уз интеграцију. Подразумевани предложак садржи ID модела предвиђања из демо података.
- Ако креирате нови образац, морате додати ову колону. У услузи Power Query изаберите **Додај условну колону** и унесите назив за нову колону, као што је **ModelID**. Унесите услов за колону, где, ако ID реда процене није празан, онда \<унесите ID модела предвиђања\>; иначе је празно.

#### <a name="transform-the-billing-types"></a>Трансформисање врста наплате

Предложак процене трошкова пројекта (из PSA у Fin and Ops) укључује условну колону која се користи за трансформисање типова наплате који су примљени из услуге Project Service Automation током интеграције. Ако креирате сопствени образац, морате додати ову условну колону. Изаберите везу **Напредни упит и филтрирање**, а затим изаберите **Додај условну колону**. Унесите име за нову колону, као што је **BillingType**. Затим унесите следећи услов:

If **msdyn\_billingtype** = 192350000, then **NonChargeable**  
else if **msdyn\_billingtype** = 192350001, then **Chargeable**  
else if **msdyn\_billingtype** = 192350002, then **Complimentary**  
else **NotAvailable**

#### <a name="transform-the-transaction-types"></a>Трансформисање врста трансакција

Предложак процене трошкова пројекта (из PSA у Fin and Ops) укључује условну колону која се користи за трансформисање врста трансакција које су примљене из услуге Project Service Automation током интеграције. Ако креирате сопствени образац, морате додати ову условну колону. Изаберите везу **Напредни упит и филтрирање**, а затим изаберите **Додај условну колону**. Унесите назив за нову колону, као што је **TransactionType**. Затим унесите следећи услов:

If **msdyn\_transactiontypecode** = 192350000, then **Cost**  
else if **msdyn\_transactiontypecode** = 192350005, then **Sales**  
else **null**

### <a name="template-mapping-in-data-integration"></a>Мапирање предложака у услузи Data Integration

Следеће илустрације приказују примере мапирања задатака предлошка у услузи Data Integration. Мапирање приказује информације о терену које ће се синхронизовати из услуге Project Service Automation у Finance.

[![Мапирање предложака](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)

[![Мапирање предложака](./media/ExpenseEstimatesMapping.jpg)](./media/ExpenseEstimatesMapping.jpg)
