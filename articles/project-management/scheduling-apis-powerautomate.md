---
title: Коришћење API-ја за распоред пројеката уз Power Automate
description: Овај чланак обезбеђује пробни ток који користи интерфејсе за програмирање (API-је) за распоред пројекта.
author: ruhercul
ms.date: 01/26/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ruhercul
ms.openlocfilehash: afec082c680596e8dcb8ec0b350b4bb7853c49ff
ms.sourcegitcommit: 7ed8e77a92917f2d242988ca02bd7de9571cce5e
ms.translationtype: MT
ms.contentlocale: sr-Cyrl-RS
ms.lasthandoff: 09/02/2022
ms.locfileid: "9404464"
---
# <a name="use-project-schedule-apis-with-power-automate"></a>Коришћење API-ја за распоред пројеката уз Power Automate

_**Односи се на:** Project Operations за сценарије засноване на ресурсима/без залиха, једноставна примена – од погодбе до профактуре_

Овај чланак описује пробни ток који приказује како се креира комплетан план пројекта помоћу услуге Microsoft Power Automate, како се креира скуп операција и како се ажурирају ентитети. Пример приказује како се креира пројекат, члан пројектног тима, скупови операција, пројектни задаци и доделе ресурса. Овај чланак такође објашњава како да ажурирате ентитет и извршите скуп операција.

Следи комплетна листа корака који су документовани у пробном току у овом чланку:

1. [Креирање PowerApps окидача](#1)
2. [Креирајте пројекат](#2)
3. [Покретање променљиве за члана тима](#3)
4. [Креирање генеричког члана тима](#4)
5. [Креирање скупа опција](#5)
6. [Креирање контејнера пројекта](#6)
7. [Покретање променљиве за статус везе](#7)
8. [Покретање променљиве за број задатака](#8)
9. [Покретање променљиве за ID пројектног задатака](#9)
10. [Урадити до](#10)
11. [Подешавање пројектног задатка](#11)
12. [Креирање пројектног задатка](#12)
13. [Креирање доделе ресурса](#13)
14. [Смањење променљиве](#14)
15. [Преименовање пројектног задатка](#15)
16. [Извршавање скупа опција](#16)

## <a name="assumptions"></a>Претпоставке

Овај чланак претпоставља да имате основно знање о платформи Dataverse, токовима у облаку и интерфејсу за програмирање апликације (API) за распоред пројекта. За више информација погледајте одељак [Референце](#references) касније у овом чланку.

## <a name="create-a-flow"></a>Направи ток

### <a name="select-an-environment"></a>Избор окружења

Не можете да креирате Power Automate ток у свом окружењу.

1. Идите на <https://flow.microsoft.com> и користите акредитиве администратора да се пријавите.
2. У горњем десном углу изаберите **Окружења**.
3. Са листе изаберите окружење у којем је инсталирана услуга Dynamics 365 Project Operations.

### <a name="create-a-solution"></a>Креирање решења

Пратите ове кораке да бисте креирали [ток који прати решење](/power-automate/overview-solution-flows). Креирањем тока који прати решење можете лакше да извезете ток да бисте га касније користили.

1. У окну за навигацију изаберите **Решења**.
2. На страници **Решења** изаберите **Ново решење**.
3. У дијалогу **Ново решење**, поставите потребна поља, па изаберите **Креирај**.

## <a name="step-1-create-a-powerapps-trigger"></a><a id="1"></a>1. корак: Креирање PowerApps окидача

1. На страници **Решења**, изаберите решење које сте креирали, а затим изаберите **Ново**.
2. У левом окну изаберите **Токови у облаку** \> **Аутоматизација** \> **Ток у облаку** \> **Тренутно**.
3. У поље **Назив тока** унесите **Закажи API демо ток**.
4. На листи **Одаберите како да покренете овај ток**, изаберите **Power Apps**. Када креирате Power Apps окидач, логика је на вама као аутору. У овом чланку параметре уноса оставите празне у сврхе тестирања.
5. Изаберите **Креирај**.

## <a name="step-2-create-a-project"></a><a id="2"></a>2. корак: Креирање пројекта

Следите ове кораке за креирање примера пројекта.

1. У току који сте креирали изаберите **Нови корак**.

    ![Додавање новог корака.](media/newstep.png)

2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.

    ![Избор операције.](media/chooseactiontab.png)

3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.

![Преименовање корака.](media/renamestep.png)

4. Преименујте корак **Креирање пројекта**.
5. У пољу **Назив радње** изаберите **msdyn\_CreateProjectV1**.
6. У оквиру поља **msdyn\_subject** изаберите **Додавање динамичког садржаја**.
7. На картици **Израз**, у поље функције унесите **Назив пројекта – utcNow()**.
8. Изаберите **У реду**.

## <a name="step-3-initialize-a-variable-for-the-team-member"></a><a id="3"></a>3. корак: Покретање променљиве за члана тима

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **иницирање променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Иницирање члана тима**.
5. У пољу **Назив**, унесите **TeamMemberAction**.
6. У пољу **Тип посла** изаберите **Ниска**.
7. У пољу **Вредност** унесите **msdyn\_CreateTeamMemberV1**.

## <a name="step-4-create-a-generic-team-member"></a><a id="4"></a>4. корак: Креирање генеричког члана тима

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Креирање члана тима**.
5. За поље **Назив радње** изаберите **TeamMemberAction** у дијалогу **Динамички садржај**.
6. У поље **Параметри радње** унесите следеће информације о параметрима.

    ```
    {
        "TeamMember": {
            "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projectteam",
            "msdyn_projectteamid": "@{guid()}",
            "msdyn_project@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})",
            "msdyn_name": "ScheduleAPIDemoTM1"
        }
    } 
    ```

    Ево објашњења параметара:

    - **\@\@odata.type** – Назив ентитета. На пример, унесите **"Microsoft.Dynamics.CRM.msdyn\_projectteam"**.
    - **msdyn\_projectteamid** – Примарни кључ ID-а пројектног тима. Вредност је универзални јединствени идентификатор (GUID) израз.   ID се генерише са картице израза.

    - **msdyn\_project\@odata.bind** – ID пројекта пројекта-власника. Вредност ће бити динамички садржај који потиче од одговора корака „Креирање пројекта“. Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/msdyn\_projects(ADD DYNAMIC CONTENT)"**.
    - **msdyn\_name** – Назив члана тима. На пример, унесите **"ScheduleAPIDemoTM1"**.

## <a name="step-5-create-an-operation-set"></a><a id="5"></a>5, корак: Креирање скупа операција

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Креирање скупа операција**.
5. У пољу **Назив радње** изаберите **msdyn\_CreateOperationSetV1** Dataverse прилагођену радњу.
6. У поље **Опис** унесите **ScheduleAPIDemoOperationSet**.
7. У поље **Пројекат** унесите **/msdyn\_projects(**.
8. У дијалогу **Динамички садржај** изаберите **msdyn\_CreateProjectV1Response ProjectId**.
9. У поље **Пројекат** унесите **)**.

## <a name="step-6-create-a-project-bucket"></a><a id="6"></a>6. корак: Креирање контејнера

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **додавање новог реда** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Креирање контејнера**.
5. У пољу **Назив табеле**, изаберите **Контејнери пројекта**.
6. У поље **Назив** унесите **ScheduleAPIDemoBucket1**.
7. За поље **Пројекат** изаберите **msdyn\_CreateProjectV1Response ProjectId** у дијалогу **Динамички садржај**.

## <a name="step-7-initialize-a-variable-for-the-link-status"></a><a id="7"></a>7. корак: Покретање променљиве за статус везе

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **иницирање променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Иницирање linkstatus**.
5. У пољу **Назив**, унесите **linkstatus**.
6. У пољу **Тип посла** изаберите **Цео број**.
7. У поље **Вредност** унесите **192350000**.

## <a name="step-8-initialize-a-variable-for-the-number-of-tasks"></a><a id="8"></a>8. корак: Покретање променљиве за број задатака

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **иницирање променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Иницирање броја задатака**.
5. У пољу **Назив**, унесите **број задатака**.
6. У пољу **Тип посла** изаберите **Цео број**.
7. У поље **Вредност** унесите **5**.

## <a name="step-9-initialize-a-variable-for-the-project-task-id"></a><a id="9"></a>9. корак: Покретање променљиве за ID пројектног задатака

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **иницирање променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Иницирање ProjectTaskID**.
5. У пољу **Назив**, унесите **број задатака**.
6. У пољу **Тип посла** изаберите **Ниска**.
7. За поље **Вредност** унесите **guid()** у изради израза.

## <a name="step-10-do-until"></a><a id="10"></a>10. корак: Урадите до

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **уради до** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. Поставите прву вредност у условној изјави на променљиву **број задатака** из дијалога **Динамички садржај**.
4. Поставите услов на **мање од једнако**.
5. Поставите другу вредност у условној изјави на **0**.

## <a name="step-11-set-a-project-task"></a><a id="11"></a>11. корак. Подешавање пројектног задатка

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **подешавање променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Подешавање пројектног задатка**.
5. У пољу **Назив** изаберите **msdyn\_projecttaskid**.
6. За поље **Вредност** унесите **guid()** у изради израза.

## <a name="step-12-create-a-project-task"></a><a id="12"></a>12. корак: Креирање пројектног задатка

Следите ове кораке да бисте креирали пројектни задатак који има јединствени ID који припада тренутном пројекту и контејнер пројекта који сте креирали.

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Креирање пројектног задатка**.
5. У пољу **Назив радње** изаберите **msdyn\_PssCreateV1**.
6. У поље **Ентитет** унесите следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projecttask",
        "msdyn_projecttaskid": "@{variables('msdyn_projecttaskid')}",
        "msdyn_project@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})",
        "msdyn_subject": "ScheduleAPIDemoTask1",
        "msdyn_projectbucket@odata.bind": "/msdyn_projectbuckets(@{outputs('Create_Project_Buckets')?['body/msdyn_projectbucketid']})",
        "msdyn_start": "@{addDays(utcNow(), 1)}",
        "msdyn_scheduledstart": "@{utcNow()}",
        "msdyn_scheduledend": "@{addDays(utcNow(), 5)}",
        "msdyn_LinkStatus": "192350000"
    }
    ```

    Ево објашњења параметара:

    - **\@\@odata.type** – Назив ентитета. На пример, унесите **"Microsoft.Dynamics.CRM.msdyn\_projecttask"**.
    - **msdyn\_projecttaskid** – Јединствени ID задатка. Вредност би требало да буде постављена на динамичку променљиву из **msdyn\_projecttaskid**.
    - **msdyn\_project\@odata.bind** – ID пројекта пројекта-власника. Вредност ће бити динамички садржај који потиче од одговора корака „Креирање пројекта“. Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/msdyn\_projects(ADD DYNAMIC CONTENT)"**.
    - **msdyn\_subject** – Било који назив задатка.
    - **msdyn\_projectbucket\@odata.bind** – Контејнер пројекта који садржи задатке. Вредност ће бити динамички садржај који потиче од одговора корака „Креирање контејнера“. Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/msdyn\_projectbuckets(ADD DYNAMIC CONTENT)"**.
    - **msdyn\_start** – Динамички садржај за датум почетка. На пример, сутра ће бити представљено као **"addDays(utcNow(), 1)"**.
    - **msdyn\_scheduledstart** – Планирани датум почетка. На пример, сутра ће бити представљено као **"addDays(utcNow(), 1)"**.
    - **msdyn\_scheduleend** – Планирани датум завршетка. Изаберите датум у будућности. На пример, наведите **"addDays(utcNow(), 5)"**.
    - **msdyn\_LinkStatus** – Статус везе. На пример, унесите **"192350000"**.

7. За поље **OperationSetId** изаберите **msdyn\_CreateOperationSetV1Response** у дијалогу **Динамички садржај**.

## <a name="step-13-create-a-resource-assignment"></a><a id="13"></a>Корак 13: Креирање доделе ресурса

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Креирање доделе**.
5. У пољу **Назив радње** изаберите **msdyn\_PssCreateV1**.
6. У поље **Ентитет** унесите следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_resourceassignment",
        "msdyn_resourceassignmentid": "@{guid()}",
        "msdyn_name": "ScheduleAPIDemoAssign1",
        "msdyn_taskid@odata.bind": "/msdyn_projecttasks(@{variables('msdyn_projecttaskid')})",
        "msdyn_projectteamid@odata.bind": "/msdyn_projectteams(@{outputs('Create_Team_Member')?['body/TeamMemberId']})",
        "msdyn_projectid@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})"
    }
    ```

7. За поље **OperationSetId** изаберите **msdyn\_CreateOperationSetV1Response** у дијалогу **Динамички садржај**.

## <a name="step-14-decrement-a-variable"></a><a id="14"></a>14. корак: Смањење променљиве

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **смањење променљиве** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У пољу **Назив** изаберите **број задатака**.
4. У поље **Вредност** унесите **1**.

## <a name="step-15-rename-a-project-task"></a><a id="15"></a>15. корак. Преименовање пројектног задатка

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Преименовање пројектног задатка**.
5. У пољу **Назив радње** изаберите **msdyn\_PssUpdateV1**.
6. У поље **Ентитет** унесите следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projecttask",
        "msdyn_projecttaskid": "@{variables('msdyn_projecttaskid')}",
        "msdyn_subject": "ScheduleDemoTask1-UpdatedName"
    }
    ```

7. За поље **OperationSetId** изаберите **msdyn\_CreateOperationSetV1Response** у дијалогу **Динамички садржај**.

## <a name="step-16-run-an-operation-set"></a><a id="16"></a>16, корак: Извршавање скупа операција

1. У току изаберите **Нови корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите **извршавање неповезане радње** . Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите три тачке (**...**), а затим изаберите **Преименуј**.
4. Преименујте корак **Извршавање скупа операција**.
5. У пољу **Назив радње** изаберите **msdyn\_ExecuteOperationSetV1**.
6. За поље **OperationSetId** изаберите **msdyn\_CreateOperationSetV1Response OperationSetId** у дијалогу **Динамички садржај**.

## <a name="references"></a>Референце

- [Преглед начина интеграције токова са услугом Dataverse – Power Automate](/power-automate/dataverse/overview?WT.mc_id=email)
- [Коришћење API-ја за распоред пројеката за извођење операција са ентитетима распоређивања](schedule-api-preview.md)
- [Преглед токова у облаку – Power Automate](/power-automate/overview-cloud?WT.mc_id=email)
- [Преглед токова који прате решења – Power Automate](/power-automate/overview-solution-flows?WT.mc_id=email)
