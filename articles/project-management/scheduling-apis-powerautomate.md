---
title: Коришћење API-ја за распоред пројеката уз Power Automate
description: Овај чланак обезбеђује пробни ток који користи програмске интерфејсе апликација "Пројецт сцхедуле" (АПИ).
author: ruhercul
ms.date: 01/26/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ruhercul
ms.openlocfilehash: afec082c680596e8dcb8ec0b350b4bb7853c49ff
ms.sourcegitcommit: 7ed8e77a92917f2d242988ca02bd7de9571cce5e
ms.translationtype: MT
ms.contentlocale: sr-Cyrl-RS
ms.lasthandoff: 09/02/2022
ms.locfileid: "9404464"
---
# <a name="use-project-schedule-apis-with-power-automate"></a>Коришћење API-ја за распоред пројеката уз Power Automate

_**Односи се на:** Project Operations за сценарије засноване на ресурсима/без залиха, једноставна примена – од погодбе до профактуре_

Овај чланак описује пробни ток који приказује како се креира комплетан план пројекта помоћу Microsoft Power Automate коришћења, креирања скупа операција и начина ажурирања ентитета. Пример приказује како се креира пројекат, члан пројектног тима, Скупови операција, пројектни задаци и доделе ресурса. Овај чланак такође садржи објашњења о томе како да ажурирате ентитет и извршите скуп операција.

Следи комплетна листа корака који су документовани у пробном току у овом чланку:

1. [Креирање окидача PowerApps](#1)
2. [Креирајте пројекат](#2)
3. [Покретање променљиве за члана тима](#3)
4. [Креирање генеричког члана тима](#4)
5. [Креирање скупа операција](#5)
6. [Креирање кофе пројекта](#6)
7. [Покретање променљиве за статус везе](#7)
8. [Покретање променљиве за број задатака](#8)
9. [Покретање променљиве за ИД пројектног задатка](#9)
10. [Урадите док](#10)
11. [Постављање пројектног задатка](#11)
12. [Креирање пројектног задатка](#12)
13. [Креирање доделе ресурса](#13)
14. [Смањење променљиве](#14)
15. [Преименовање пројектног задатка](#15)
16. [Покретање скупа операција](#16)

## <a name="assumptions"></a>Претпоставке

Овај чланак претпоставља да имате основно знање Dataverse о платформи, токовима облака и програмском интерфејсу апликације Пројецт Сцхедуле (АПИ). Више информација потражите у одељку [Референце у](#references) овом чланку.

## <a name="create-a-flow"></a>Направи ток

### <a name="select-an-environment"></a>Избор окружења

Можете да креирате Power Automate ток у свом окружењу.

1. Идите на <https://flow.microsoft.com> локацију и користите администраторске акредитиве за пријављивање.
2. У горњем десном углу изаберите ставку **Окружења**.
3. Са листе изаберите окружење у којем је Dynamics 365 Project Operations инсталирано.

### <a name="create-a-solution"></a>Креирање решења

Следите ове кораке да бисте креирали ток [свестан решења](/power-automate/overview-solution-flows). Креирањем тока свесног решења можете лакше да извезете ток да бисте га касније користили.

1. У окну за навигацију изаберите ставку **Решења**.
2. На страници **Решења** изаберите **ново решење**.
3. У дијалогу **Ново решење** поставите потребна поља, а затим изаберите ставку **Креирај**.

## <a name="step-1-create-a-powerapps-trigger"></a><a id="1"></a> 1 . корак: Креирање окидача PowerApps

1. На страници **Решења** изаберите решење које сте креирали, а затим изаберите ставку **Ново**.
2. У левом окну изаберите опцију **Цлоуд флоwс** \> **Аутоматион** \> **Цлоуд флоw** \> **Инстант.**
3. У поље Име **тока** унесите Сцхедуле **АПИ Демо Флоw**.
4. У листи Одаберите **како да покренете ову листу тока** изаберите **Power Apps**. Када креирате окидач Power Apps, логика је на вама као аутору. У овом чланку параметре уноса оставите празне у сврхе тестирања.
5. Изаберите **Креирај**.

## <a name="step-2-create-a-project"></a><a id="2"></a>2. корак: Креирање пројекта

Следите ове кораке да бисте креирали узорак пројекта.

1. У току који сте креирали изаберите **нови корак**.

    ![Додавање новог корака.](media/newstep.png)

2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.

    ![Избор операције.](media/chooseactiontab.png)

3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.

![Преисићи корак.](media/renamestep.png)

4. Преименујте корак **Креирање пројекта**.
5. У пољу **Име радње** изаберите **мсдyн \_ CreateProjectV1**.
6. У оквиру **поља мсдyн \_ тема** изаберите Додај **динамички садржај**.
7. На картици **Израз**, у поље функције унесите име **пројекта - утцНоw()**.
8. Изаберите **У реду**.

## <a name="step-3-initialize-a-variable-for-the-team-member"></a><a id="3"></a> 3 . корак: Покретање променљиве за члана тима

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите променљиву **покретања**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте **корак члана Инит тима**.
5. У поље **Име** унесите **ТеамМемберАцтион**.
6. У пољу Врста изаберите **ниску** **.**
7. У поље **Вредност** унесите **мсдyн \_ CreateTeamMemberV1**.

## <a name="step-4-create-a-generic-team-member"></a><a id="4"></a> 4 . корак: Креирање генеричког члана тима

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте корак **Креирање члана тима**.
5. За поље **Име радње** изаберите **ТеамМемберАцтион у** дијалогу Динамички **садржај**.
6. У поље **Параметри радње** унесите следеће информације о параметрима.

    ```
    {
        "TeamMember": {
            "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projectteam",
            "msdyn_projectteamid": "@{guid()}",
            "msdyn_project@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})",
            "msdyn_name": "ScheduleAPIDemoTM1"
        }
    } 
    ```

    Ево објашњења параметара:

    - **\@\@ одата.тyпе** – Име ентитета. На пример, унесите **"Мицрософт.Дyнамицс.ЦРМ.мсдyн \_ пројецттеам"**.
    - **мсдyн \_ пројецттеамид** – Примарни кључ ИД пројектног тима. Вредност је глобално јединствени идентификатор (ГУИД) израз.   ИД се генерише са картице израза.

    - **мсдyн \_ пројецт \@ одата.бинд** – ИД пројекта. Вредност ће бити динамички садржај који потиче од одговора корака "Креирај пројекат". Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/мсдyн \_ пројецтс(АДД ДYНАМИЦ ЦОНТЕНТ)"**.
    - **мсдyн \_** име – Име члана тима. На пример, унесите **"ScheduleAPIDemoTM1"**.

## <a name="step-5-create-an-operation-set"></a><a id="5"></a> 5 . корак: Креирање скупа операција

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте корак **Креирање скупа операција**.
5. У пољу **Име радње** изаберите мсдyн **\_ CreateOperationSetV1 прилагођену** Dataverse радњу.
6. У поље **Опис** унесите **СцхедулеАПИДемоОператионСет**.
7. У поље **Пројекат** унесите **/мсдyн пројекте \_ (**.
8. У дијалогу **Динамички** садржај изаберите **мсдyн \_ CreateProjectV1Response Пројецт ИД**.
9. У поље **Пројекат** унесите **)**.

## <a name="step-6-create-a-project-bucket"></a><a id="6"></a> 6 . корак: Креирање кофе пројекта

1. У току изаберите нови **корак**.
2. У дијалогу Избор операције **, у поље за претрагу унесите** додавање новог реда **.** Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте корак Креирање **кофе**.
5. У пољу Име **табеле** изаберите ставку Кофе **пројекта**.
6. У поље **Име** унесите **ScheduleAPIDemoBucket1**.
7. За поље **Пројекат** изаберите **мсдyн \_ CreateProjectV1Response ПројецтИд у** дијалогу Динамички **садржај**.

## <a name="step-7-initialize-a-variable-for-the-link-status"></a><a id="7"></a> 7 . корак: Покретање променљиве за статус везе

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите променљиву **покретања**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте **корак Инит линкстатус**.
5. У поље **Име** унесите **статистику везе**.
6. У пољу **Врста** изаберите цео **број**.
7. У поље **Вредност** унесите **192350000**.

## <a name="step-8-initialize-a-variable-for-the-number-of-tasks"></a><a id="8"></a> 8 . корак: Покретање променљиве за број задатака

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите променљиву **покретања**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте **корак Инит Број задатака**.
5. У поље **Име** унесите број **задатака**.
6. У пољу **Врста** изаберите цео **број**.
7. У поље **Вредност** унесите **5**.

## <a name="step-9-initialize-a-variable-for-the-project-task-id"></a><a id="9"></a> 9 . корак: Покретање променљиве за ИД пројектног задатка

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите променљиву **покретања**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте **корак Инит ПројецтТаскИД**.
5. У поље **Име** унесите број **задатака**.
6. У пољу Врста изаберите **ниску** **.**
7. За поље **Вредност** унесите гуид **()** у израду израза.

## <a name="step-10-do-until"></a><a id="10"></a> 10 . корак: Урадите док

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите опцију **уради до**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. Поставите прву вредност у условној изјави на број променљивих **задатака из** дијалога " **Динамички** садржај".
4. Поставите услов на **мање од једнаког**.
5. Поставите другу вредност у условној изјави на **0**.

## <a name="step-11-set-a-project-task"></a><a id="11"></a> 11 . корак: Постављање пројектног задатка

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите постављену **променљиву**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У новом кораку изаберите елипсу (**...), а затим изаберите** ставку **Преименуј**.
4. Преименујте корак **Скуп пројектног задатка**.
5. У пољу **Име** изаберите **мсдyн \_ пројецттаскид**.
6. За поље **Вредност** унесите гуид **()** у израду израза.

## <a name="step-12-create-a-project-task"></a><a id="12"></a> 12 . корак: Креирање пројектног задатка

Следите ове кораке да бисте креирали пројектни задатак који има јединствени ИД који припада тренутном пројекту и кофу пројекта коју сте креирали.

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите елипсу (...), а затим **изаберите** ставку **Преименуј**.
4. Преименујте корак Креирање **пројектног задатка**.
5. У пољу **Име радње** изаберите **мсдyн \_ PssCreateV1**.
6. У поље **Ентитет унесите** следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projecttask",
        "msdyn_projecttaskid": "@{variables('msdyn_projecttaskid')}",
        "msdyn_project@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})",
        "msdyn_subject": "ScheduleAPIDemoTask1",
        "msdyn_projectbucket@odata.bind": "/msdyn_projectbuckets(@{outputs('Create_Project_Buckets')?['body/msdyn_projectbucketid']})",
        "msdyn_start": "@{addDays(utcNow(), 1)}",
        "msdyn_scheduledstart": "@{utcNow()}",
        "msdyn_scheduledend": "@{addDays(utcNow(), 5)}",
        "msdyn_LinkStatus": "192350000"
    }
    ```

    Ево објашњења параметара:

    - **\@\@ одата.тyпе** – Име ентитета. На пример, унесите **"Мицрософт.Дyнамицс.ЦРМ.мсдyн \_ пројецттаск"**.
    - **мсдyн \_ пројецттаскид** – Јединствени ИД задатка. Вредност би требало да буде постављена на динамичку променљиву **из мсдyн \_ пројецттаскид**.
    - **мсдyн \_ пројецт \@ одата.бинд** – ИД пројекта. Вредност ће бити динамички садржај који потиче од одговора корака "Креирај пројекат". Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/мсдyн \_ пројецтс(АДД ДYНАМИЦ ЦОНТЕНТ)"**.
    - **мсдyн \_ тема** – Било које име задатка.
    - **мсдyн \_ пројецтбуцкет \@ одата.бинд** – Канта пројекта која садржи задатке. Вредност ће бити динамичан садржај који потиче од одговора корака "Креирај кофу". Уверите се да сте унели пуну путању и додали динамички садржај између заграда. Потребни су знаци навода. На пример, унесите **"/мсдyн \_ пројецтбуцкетс(АДД ДYНАМИЦ ЦОНТЕНТ)"**.
    - **мсдyн \_ старт** – Динамички садржај за датум почетка. На пример, сутра ће бити представљено као **"аддДаyс(утцНоw(), 1)"**.
    - **мсдyн \_ планиранистарт** – Планирани датум почетка. На пример, сутра ће бити представљено као **"аддДаyс(утцНоw(), 1)"**.
    - **мсдyн \_ сцхедулеенд** – Планирани датум завршетка. Изаберите датум у будућности. На пример, наведите **"аддДаyс(утцНоw(), 5)"**.
    - **мсдyн \_ ЛинкСтатус** – Статус везе. На пример, унесите **"192350000"**.

7. За поље **ОператионСетИд** изаберите **мсдyн \_ CreateOperationSetV1Response** у дијалогу динамички **садржај**.

## <a name="step-13-create-a-resource-assignment"></a><a id="13"></a> 13 . корак: Креирање додељивање ресурса

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите елипсу (...), а затим **изаберите** ставку **Преименуј**.
4. Преименујте корак **Креирање доделе**.
5. У пољу **Име радње** изаберите **мсдyн \_ PssCreateV1**.
6. У поље **Ентитет унесите** следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_resourceassignment",
        "msdyn_resourceassignmentid": "@{guid()}",
        "msdyn_name": "ScheduleAPIDemoAssign1",
        "msdyn_taskid@odata.bind": "/msdyn_projecttasks(@{variables('msdyn_projecttaskid')})",
        "msdyn_projectteamid@odata.bind": "/msdyn_projectteams(@{outputs('Create_Team_Member')?['body/TeamMemberId']})",
        "msdyn_projectid@odata.bind": "/msdyn_projects(@{outputs('Create_Project')?['body/ProjectId']})"
    }
    ```

7. За поље **ОператионСетИд** изаберите **мсдyн \_ CreateOperationSetV1Response** у дијалогу динамички **садржај**.

## <a name="step-14-decrement-a-variable"></a><a id="14"></a> 14 . корак: Смањење променљиве

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите променљиву **смањења**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У пољу **Име** изаберите број **задатака**.
4. У поље **Вредност** унесите **1**.

## <a name="step-15-rename-a-project-task"></a><a id="15"></a> 15 . корак: Преименовање пројектног задатка

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите елипсу (...), а затим **изаберите** ставку **Преименуј**.
4. Преименујте корак Преименујте **пројектни задатак**.
5. У пољу **Име радње** изаберите **мсдyн \_ PssUpdateV1**.
6. У поље **Ентитет унесите** следеће информације о параметрима.

    ```
    {
        "@@odata.type": "Microsoft.Dynamics.CRM.msdyn_projecttask",
        "msdyn_projecttaskid": "@{variables('msdyn_projecttaskid')}",
        "msdyn_subject": "ScheduleDemoTask1-UpdatedName"
    }
    ```

7. За поље **ОператионСетИд** изаберите **мсдyн \_ CreateOperationSetV1Response** у дијалогу динамички **садржај**.

## <a name="step-16-run-an-operation-set"></a><a id="16"></a> 16 . корак: Покретање скупа операција

1. У току изаберите нови **корак**.
2. У дијалогу **Избор операције**, у поље за претрагу унесите извршавање неповезане **радње**. Затим на картици **Радње** изаберите операцију са листе резултата.
3. У кораку изаберите елипсу (...), а затим **изаберите** ставку **Преименуј**.
4. Преименујте корак **Изврши скуп операција**.
5. У пољу **Име радње** изаберите **мсдyн \_ ExecuteOperationSetV1**.
6. За поље **ОператионСетИд** изаберите **мсдyн \_ CreateOperationSetV1Response ОператионСетИд** у **дијалогу Динамид** садржаја.

## <a name="references"></a>Референце

- [Преглед начина интегрисања токова са Dataverse - Power Automate](/power-automate/dataverse/overview?WT.mc_id=email)
- [Коришћење API-ја за распоред пројеката за извођење операција са ентитетима распоређивања](schedule-api-preview.md)
- [Преглед токова облака - Power Automate](/power-automate/overview-cloud?WT.mc_id=email)
- [Преглед токова свесних решења - Power Automate](/power-automate/overview-solution-flows?WT.mc_id=email)
